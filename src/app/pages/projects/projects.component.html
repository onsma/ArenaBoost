<!-- Hero Section -->
<section class="hero-section position-relative">
  <div class="hero-bg bg-dark" style="height: 500px; overflow: hidden;">
    <!-- Background image set via CSS in the component's SCSS file -->
    <div class="overlay position-absolute w-100 h-100 bg-dark" style="opacity: 0.7;"></div>
  </div>

  <div class="container position-relative" style="margin-top: -400px; z-index: 10;">
    <div class="row py-5 align-items-center">
      <div class="col-lg-8 text-white">
        <h1 class="display-4 fw-bold mb-4">Sports Projects</h1>
        <p class="lead mb-4">Discover exciting sports projects seeking investment and support on ArenaBoost.</p>
        <div class="d-flex flex-wrap gap-3">
          <a routerLink="/projects/create" class="btn btn-warning btn-lg px-4 fw-bold">
            <i class="bi bi-plus-circle me-2"></i>Create Project
          </a>
          
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Category Filter -->
<section class="py-4 bg-light">
  <div class="container">
    <div class="row mb-3">
      <div class="col-12 text-center">
        <h5 class="mb-3">Filter by Category</h5>
      </div>
    </div>
    <div class="d-flex flex-wrap justify-content-center gap-3">
      <button class="btn px-4 py-2" [ngClass]="{'btn-warning': !selectedCategory, 'btn-outline-dark': selectedCategory}"
        (click)="filterByCategory('')">
        <i class="bi bi-grid me-2"></i>All Projects
      </button>
      <button *ngFor="let category of categories" class="btn px-4 py-2"
        [ngClass]="{'btn-warning': selectedCategory === category, 'btn-outline-dark': selectedCategory !== category}"
        (click)="filterByCategory(category)">
        <i class="bi" [ngClass]="{
            'bi-trophy': category === 'Tournament',
            'bi-gear': category === 'Equipement',
            'bi-mortarboard': category === 'Formation'
          }"></i>
        <span class="ms-2">{{ category }}</span>
      </button>
    </div>
  </div>
</section>

<!-- Projects List -->
<section class="py-5 bg-white">
  <div class="container py-4">
    <div class="row mb-4">
      <div class="col-12 text-center">
        <h2 class="mb-3">Explore Projects</h2>
        <p class="text-muted">Find sports projects that match your interests and investment goals</p>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-5">
      <div class="spinner-border text-warning" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3 text-muted">Loading projects...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading && projects.length === 0" class="text-center py-5">
      <div class="alert alert-danger">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        There was an error loading projects. Please try again later.
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && !error && projects.length === 0" class="border rounded p-5 text-center">
      <p class="mb-0 text-muted">No projects found. Please try a different category or check back later.</p>
    </div>

    <!-- Projects Grid -->
    <div *ngIf="!loading && projects.length > 0" class="row g-4">
      <div *ngFor="let project of projects" class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm project-card">
          <!-- Project Image -->
          <div class="position-relative">
            <img [src]="project.image || project.imageUrl || 'assets/images/projects/football-tournaament.jpg'"
              [alt]="project.name" class="card-img-top">
            <div class="position-absolute top-0 end-0 m-2">
              <span class="badge bg-warning">{{ project.category }}</span>
            </div>
          </div>

          <!-- Project Title -->
          <div class="card-body pt-3 pb-0">
            <h5 class="card-title fw-bold mb-2">{{ project.name }}</h5>
          </div>

          <!-- Project Details -->
          <div class="card-body pt-0">
            <!-- Project Stats in Grid Layout -->
            <div class="row project-stats mb-3">
              <div class="col-4 stat-item">
                <div class="stat-icon"><i class="bi bi-calendar"></i></div>
                <div class="stat-value">{{ project.days_remaining }}</div>
                <div class="stat-label">Days left</div>
              </div>
              <div class="col-4 stat-item">
                <div class="stat-icon"><i class="bi bi-clock"></i></div>
                <div class="stat-value">{{ project.duration_days }}</div>
                <div class="stat-label">Duration</div>
              </div>
              <div class="col-4 stat-item">
                <div class="stat-icon"><i class="bi bi-graph-up"></i></div>
                <div class="stat-value">{{ getProgressPercentage(project) }}%</div>
                <div class="stat-label">Progress</div>
              </div>
            </div>

            <!-- Progress Bar -->
            <div class="progress mb-3" style="height: 8px;">
              <div class="progress-bar bg-warning" [style.width.%]="getProgressPercentage(project)"
                [attr.aria-valuenow]="getProgressPercentage(project)" aria-valuemin="0" aria-valuemax="100">
              </div>
            </div>

            <!-- Funding Info -->
            <div class="d-flex justify-content-between mb-3">
              <span class="fw-bold">{{ project.current_amount | currency }}</span>
              <span class="text-muted">of {{ project.goal_amount | currency }}</span>
            </div>

            <!-- Location -->
            <div class="location mb-3">
              <i class="bi bi-geo-alt me-1"></i> Started: {{ project.start_date | date }}
            </div>

            <!-- View Button -->
            <div class="d-grid">
              <a [routerLink]="['/projects', project.id_project]" class="btn btn-primary">View Project</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Services Preview Section -->
<section class="py-5 bg-light">
  <div class="container py-5">
    <div class="row align-items-center">
      <div class="col-lg-5 mb-4 mb-lg-0">
        <h2 class="mb-4">Why Invest in Sports Projects?</h2>
        <p class="lead mb-4">Sports projects offer unique investment opportunities with potential for high returns and
          community impact.</p>
        <a routerLink="/how-it-works" class="btn btn-warning px-4">Learn More</a>
      </div>

      <div class="col-lg-7">
        <div class="row g-4">
          <!-- Benefit 1 -->
          <div class="col-md-6">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body p-4">
                <div class="d-flex align-items-center mb-3">
                  <div class="bg-warning rounded-circle d-flex align-items-center justify-content-center"
                    style="width: 50px; height: 50px;">
                    <i class="bi bi-graph-up-arrow"></i>
                  </div>
                  <h5 class="ms-3 mb-0">High Returns</h5>
                </div>
                <p class="card-text">Sports projects can offer competitive financial returns while supporting athletic
                  talent.</p>
              </div>
            </div>
          </div>

          <!-- Benefit 2 -->
          <div class="col-md-6">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body p-4">
                <div class="d-flex align-items-center mb-3">
                  <div class="bg-warning rounded-circle d-flex align-items-center justify-content-center"
                    style="width: 50px; height: 50px;">
                    <i class="bi bi-people-fill"></i>
                  </div>
                  <h5 class="ms-3 mb-0">Community Impact</h5>
                </div>
                <p class="card-text">Make a positive difference in communities while growing your investment portfolio.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Create Project CTA -->
<section class="py-5 bg-warning">
  <div class="container py-4 text-center">
    <h2 class="mb-4">Have a Sports Project in Mind?</h2>
    <p class="lead mb-4">Create your project on ArenaBoost and connect with investors and supporters who
      share your passion for sports excellence.</p>
    <a routerLink="/projects/create" class="btn btn-dark btn-lg px-5">
      <i class="bi bi-plus-circle me-2"></i>Create a Project
    </a>
  </div>
</section>